import{g as A,r as I,u as N,h as P,i as j,j as _,k as q,t as B,s as E,l as F,m as O,o as R,b as y,a as n,w as r,n as U,d as c,p as d,q as t,v as $,x as v,y as w,z as x,e as p,A as H,B as J,C as L,F as z,_ as D}from"./index-B8ppEKiW.js";function W(o){return async(s,e)=>{const l={method:o,headers:{"Content-Type":"application/json"}};return e&&(l.body=JSON.stringify(e)),fetch(s,l).then(G)}}async function G(o){return o.text().then(s=>{const e=s&&JSON.parse(s);if(!o.ok){const l=e&&e.message||o.statusText;return Promise.reject(l)}return e})}const K={post:W("POST")},M={AUTHENTICATOR:"/authenticate"};class Q{static async login(s){try{return K.post(M.AUTHENTICATOR,s)}catch(e){console.log(e)}}}const X={class:"wrap-login d-flex align-center justify-center"},Y={class:"d-flex justify-center"},Z=A({__name:"LoginPage",setup(o){const s=I(!1),{t:e}=N(),l=P(),V=j({email:_().required().email().label("Email"),password:_().required().label("Password")}),{defineField:f,errors:g,handleSubmit:k}=q({validationSchema:B(V)}),[u,C]=f("email"),[m,T]=f("password"),b=k(async h=>{try{const a=await Q.login(h);a&&(localStorage.setItem("email",a.email),localStorage.setItem("firstName",a.firstName),localStorage.setItem("token",a.token),await l.push("/dashboard"))}catch(a){console.log(a),E("Đăng nhập không thành công!","error")}});return(h,a)=>{const S=F("base-change-language");return R(),O(z,null,[y("div",X,[n(J,{class:"pa-6",elevation:"8","max-width":"400"},{default:r(()=>[n(U,{class:"text-center text-h3"},{default:r(()=>[c(d(t(e)("login")),1)]),_:1}),n($,null,{default:r(()=>[n(v,w({modelValue:t(u),"onUpdate:modelValue":a[0]||(a[0]=i=>x(u)?u.value=i:null)},t(C),{label:"Email",variant:"outlined","prepend-inner-icon":"mdi-email",type:"email","error-messages":t(g).email}),null,16,["modelValue","error-messages"]),n(v,w({class:"mt-1",modelValue:t(m),"onUpdate:modelValue":a[1]||(a[1]=i=>x(m)?m.value=i:null)},t(T),{label:t(e)("password"),variant:"outlined",type:s.value?"text":"password","prepend-inner-icon":"mdi-lock","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":a[2]||(a[2]=i=>s.value=!s.value),"error-messages":t(g).password}),null,16,["modelValue","label","type","append-inner-icon","error-messages"]),n(p,{block:"",color:"primary",class:"mt-4",onClick:t(b)},{default:r(()=>[c(d(t(e)("login")),1)]),_:1},8,["onClick"])]),_:1}),n(H,{class:"justify-center"},{default:r(()=>[n(p,{variant:"text",color:"secondary"},{default:r(()=>[c(d(t(e)("register")),1)]),_:1}),n(p,{variant:"text",color:"secondary"},{default:r(()=>[c(d(t(e)("forgotPass")),1)]),_:1})]),_:1}),y("div",Y,[n(S)])]),_:1})]),n(L)],64)}}}),ae=D(Z,[["__scopeId","data-v-2da2813d"]]);export{ae as default};
